<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <title>Boletim</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <style>
      td,
      th {
        text-align: center !important;
      }

      tfoot tr {
        background-color: lightgray;
        font-weight: bold;
      }

      label,
      input,
      button {
        display: block;
      }

      label,
      input {
        width: 100%;
      }

      label {
        font-weight: bold;
      }

      form {
        width: 350px;
      }

      table,
      form,
      button {
        margin: auto;
      }

      button {
        margin-top: 10px;
        margin-bottom: 10px;
      }
    </style>
    <script>
      window.onload = function () {
        // set initial variables:
        let sumNote1 = 0;
        let sumNote2 = 0;
        let sumMedia1 = 0;
        let sumMedia2 = 0;
        let sumMediaTotal = 0;
        let mediaTotal = 0;
        let count = 0;
        let aprovados = 0;
        let countTfoot = 0;

        // when button clicks
        document.getElementsByTagName("button")[0].onclick = () => {
          count += 1;

          // gets name
          let name = document.getElementsByTagName("input")[0].value;

          // gets note1
          let note1 = parseFloat(
            document.getElementsByTagName("input")[1].value
          );
          sumNote1 += note1;
          sumMedia1 = (sumNote1 / count).toFixed(2);

          // gets note2
          let note2 = parseFloat(
            document.getElementsByTagName("input")[2].value
          );
          sumNote2 += note2;
          sumMedia2 = (sumNote2 / count).toFixed(2);

          //gets media
          let media = (note1 + note2) / 2;
          sumMediaTotal += media;
          mediaTotal = (sumMediaTotal / count).toFixed(2);

          //gets situacao
          let situacao = "";
          if (media > 6) {
            situacao = "Aprovado";
            aprovados += 1;
          } else {
            situacao = "Reprovado";
          }
          // input table boody
          document
            .getElementsByTagName("tbody")[0]
            .appendChild(document.createElement("tr")).innerHTML = `
          <tr>
            <td>${name}</td>
            <td>${note1}</td>
            <td>${note2}</td>
            <td>${media}</td>
            <td>${situacao}</td>
          </tr>
          `;

          // input table tfoot
          if (
            document
              .getElementsByTagName("tfoot")[0]
              .getElementsByTagName("tr")[0]
          ) {
            document
              .getElementsByTagName("tfoot")[0]
              .getElementsByTagName("tr")[0]
              .remove();
          }
          document
            .getElementsByTagName("tfoot")[0]
            .appendChild(document.createElement("tr")).innerHTML = `
          <tr>
            <td>Médias</td>
            <td>${sumMedia1}</td>
            <td>${sumMedia2}</td>
            <td>${mediaTotal}</td>
            <td>${aprovados}</td>
          </tr>
          `;

          // Reset form
          document.getElementsByTagName("form")[0].reset();
        };
      };
    </script>
  </head>

  <body>
    <form>
      <label for="nome">Nome do aluno</label>
      <input id="nome" type="text" name="nome" required />
      <label for="nota1">Nota 1</label>
      <input
        type="number"
        id="nota1"
        name="nota1"
        min="0.0"
        max="10.0"
        step="0.1"
        required
      />
      <label for="nota2">Nota 2</label>
      <input
        type="number"
        id="nota2"
        name="nota2"
        min="0.0"
        max="10.0"
        step="0.1"
        required
      />
      <button>Enviar</button>
    </form>
    <table class="w3-table w3-bordered">
      <thead>
        <tr>
          <th>Aluno</th>
          <th>Nota 1</th>
          <th>Nota 2</th>
          <th>Média</th>
          <th>Situação</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot></tfoot>
    </table>
  </body>
</html>
